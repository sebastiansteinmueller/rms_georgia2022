library(usethis)
use_git_config(user.name = "Sebastian Steinmueller", user.email = "sebastian.steinmueller@gmail.com")
############################################ START ######################################################
############################################ rms_tables_georgia2022.R ################################################
#### Queries: UNHCR Statistics and Demographics Section, stats@unhcr.org
#### Project: RMS Georgia Pilot 2022
#### Description: Create survey object and indicator tables for COMPASS with clean data from the RMS Pilot in the Georgia Tbilisi Administered Territory
rm(list=ls()) # clear workspace
#### I. Read data, packages etc #####
### packages
library(haven)
library(tidyverse)
library(readxl)
library(srvyr)
library(ggplot2)
library(robotoolbox)
library(labelled)
library(rlang)
library(openxlsx)
### options
#options(scipen = 999)
### functions
source("rmsfunctions.R")
## colours (https://intranet.unhcr.org/content/dam/unhcr/intranet/staff%20support/strategic/documents/english/brand-book/UNHCR-Brand%20Book.pdf)
unhcrPaletteBlue <- c("#0072BC", "#338EC9", "#66AAD7", "#99C7E4", "#CCE3F2")
unhcrPaletteBlack <- c("#000000", "#333333", "#666666", "#999999", "#CCCCCC")
unhcrPaletteYellow <- c("#FAEB00", "#FBEF33", "#FCF366", "#FDF799", "#FEFBCC")
unhcrPaletteWhite <- c("#FFFFFF")
unhcrPaletteRed <- c("#E73451")
unhcrPaletteGreen <- c("#00AB92")
### clean data created with rms_process_[countryyear]
load("data/rms_clean_georgia2022.RData")
#### II. Make survey objects #####
### DEFINE YOUR SURVEY OBJECTS HERE ###
hh.design <- hh %>%
to_factor() %>% # convert all labelled objects to factors
rename(index = `_index`) %>% # srvyr needs clean names
as_survey_design() # <- DEFINE YOUR HH SURVEY OBJECT HERE
ind.design <- s1 %>%
to_factor() %>% # convert all labelled objects to factors
rename(index = `_index`, parent_index = `_parent_index`) %>% # srvyr needs clean names
as_survey_design(ids = `parent_index`) # <- DEFINE YOUR INDIVIDUAL SURVEY OBJECT HERE
summary(hh$hhsize)
############################################ START ######################################################
############################################ rms_tables_georgia2022.R ################################################
#### Queries: UNHCR Statistics and Demographics Section, stats@unhcr.org
#### Project: RMS Georgia Pilot 2022
#### Description: Create survey object and indicator tables for COMPASS with clean data from the RMS Pilot in the Georgia Tbilisi Administered Territory
rm(list=ls()) # clear workspace
#### I. Read data, packages etc #####
### packages
library(haven)
library(tidyverse)
library(readxl)
library(srvyr)
library(ggplot2)
library(robotoolbox)
library(labelled)
library(rlang)
library(openxlsx)
### options
#options(scipen = 999)
### functions
source("rmsfunctions.R")
## colours (https://intranet.unhcr.org/content/dam/unhcr/intranet/staff%20support/strategic/documents/english/brand-book/UNHCR-Brand%20Book.pdf)
unhcrPaletteBlue <- c("#0072BC", "#338EC9", "#66AAD7", "#99C7E4", "#CCE3F2")
unhcrPaletteBlack <- c("#000000", "#333333", "#666666", "#999999", "#CCCCCC")
unhcrPaletteYellow <- c("#FAEB00", "#FBEF33", "#FCF366", "#FDF799", "#FEFBCC")
unhcrPaletteWhite <- c("#FFFFFF")
unhcrPaletteRed <- c("#E73451")
unhcrPaletteGreen <- c("#00AB92")
### clean data created with rms_process_[countryyear]
load("data/rms_clean_georgia2022.RData")
#### II. Make survey objects #####
### DEFINE YOUR SURVEY OBJECTS HERE ###
hh.design <- hh %>%
to_factor() %>% # convert all labelled objects to factors
rename(index = `_index`) %>% # srvyr needs clean names
as_survey_design() # <- DEFINE YOUR HH SURVEY OBJECT HERE
ind.design <- s1 %>%
to_factor() %>% # convert all labelled objects to factors
rename(index = `_index`, parent_index = `_parent_index`) %>% # srvyr needs clean names
as_survey_design(ids = `parent_index`) # <- DEFINE YOUR INDIVIDUAL SURVEY OBJECT HERE
table(hh$DWE000a)
table(hh$Filter_Camp)
table(hh$_geolocation)
table(hh$`_geolocation`)
View(hh)
View(hh[[196]][[1]])
